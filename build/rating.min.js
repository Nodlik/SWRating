this.JST=this.JST||{},this.JST["rating.png.html.hbs"]=Handlebars.template({1:function(a,b,c,d,e,f){var g;return'        <div data-value="'+this.escapeExpression(this.lambda(a,a))+'" class="w-star w-star_type-png w-rating__star '+(null!=(g=b["if"].call(a,null!=f[1]?f[1].isLocked:f[1],{name:"if",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'" '+(null!=(g=b["if"].call(a,null!=f[1]?f[1].stretch:f[1],{name:"if",hash:{},fn:this.program(4,d,0,e,f),inverse:this.program(6,d,0,e,f),data:d}))?g:"")+'>\n            <div class="w-star__clip-rect"></div>\n        </div>\n'},2:function(a,b,c,d){return"w-star_locked"},4:function(a,b,c,d){return""},6:function(a,b,c,d,e,f){return'style="width: '+this.escapeExpression(this.lambda(null!=f[2]?f[2].starSize:f[2],a))+'px"'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e,f){var g;return'<div class="w-rating__stars">\n'+(null!=(g=(b.times||a&&a.times||b.helperMissing).call(a,null!=a?a.pointNumber:a,{name:"times",hash:{},fn:this.program(1,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'</div>\n\n<div class="w-rating__result">\n    <div class="w-rating__mark"></div>\n    <div class="w-rating__vote-count"></div>\n</div>'},useData:!0,useDepths:!0}),this.JST["rating.svg.html.hbs"]=Handlebars.template({1:function(a,b,c,d,e,f){var g,h=this.lambda,i=this.escapeExpression;return'        <div data-value="'+i(h(a,a))+'" class="w-star w-star_type-svg w-rating__star '+(null!=(g=b["if"].call(a,null!=f[1]?f[1].isLocked:f[1],{name:"if",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'"  '+(null!=(g=b["if"].call(a,null!=f[1]?f[1].stretch:f[1],{name:"if",hash:{},fn:this.program(4,d,0,e,f),inverse:this.program(6,d,0,e,f),data:d}))?g:"")+'>\n            <svg viewBox="0 0 198 198" shape-rendering="geometricPrecision">\n                <clipPath id="clip'+i(h(a,a))+'">\n                    <rect class="w-star__clip-rect" x="0" y="0" width="1%" height="100%" />\n                </clipPath>\n\n                <polygon fill="url(#UnActiveGradient)" points="100,10 40,198 190,78 10,78 160,198" />\n                <polygon fill="url(#ActiveGradient)" clip-path="url(#clip'+i(h(a,a))+')" points="100,10 40,198 190,78 10,78 160,198" />\n            </svg>\n        </div>\n'},2:function(a,b,c,d){return"w-star_locked"},4:function(a,b,c,d){return""},6:function(a,b,c,d,e,f){return'style="width: '+this.escapeExpression(this.lambda(null!=f[2]?f[2].starSize:f[2],a))+'px"'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e,f){var g;return'<svg viewBox="0 0 198 198" class="w-rating__svg-defs">\n    <defs>\n        <linearGradient id="UnActiveGradient" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="100%">\n            <stop offset="0" style="stop-color: #FFFFFF"/>\n            <stop offset="1" style="stop-color: #000000"/>\n        </linearGradient>\n\n        <linearGradient id="ActiveGradient" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="100%">\n            <stop offset="0" style="stop-color: #ffe900"/>\n            <stop offset="1" style="stop-color: #ff7100"/>\n        </linearGradient>\n    </defs>\n</svg>\n\n<div class="w-rating__stars">\n'+(null!=(g=(b.times||a&&a.times||b.helperMissing).call(a,null!=a?a.pointNumber:a,{name:"times",hash:{},fn:this.program(1,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'</div>\n\n<div class="w-rating__result">\n    <div class="w-rating__mark"></div>\n    <div class="w-rating__vote-count"></div>\n</div>'},useData:!0,useDepths:!0});var SW;!function(a){var b=function(){function a(){this.events={}}return a.prototype.on=function(a,b){return a in this.events?this.events[a].push(b):this.events[a]=[b],this},a.prototype.off=function(a){delete this.events[a]},a.prototype.trigger=function(a,b){var c=this;void 0===b&&(b=null),a in this.events&&this.events[a].forEach(function(a){a({data:b,widget:c})})},a}();a.EventWidget=b}(SW||(SW={}));var SW;!function(a){var b=function(){function a(a){void 0===a&&(a={}),this.config={pointNumber:5,starSize:20,stretch:!1,isLocked:!1,starType:"svg"},this.set(a)}return a.prototype.get=function(){return this.config},a.prototype.set=function(a){void 0===a&&(a={});for(var b in a)a.hasOwnProperty(b)&&b in this.config&&(this.config[b]=a[b])},a}();a.Config=b}(SW||(SW={}));var SW;!function(a){var b=function(){function a(a){this.el=a,this.value=0,this.clip=this.el.querySelectorAll(".w-star__clip-rect")[0]}return a.prototype.setEvents=function(a,b,c){this.el.classList.contains("w-star_locked")||(this.starClick=a,this.mouseEnter=b,this.mouseLeave=c,this.el.addEventListener("click",a),this.el.addEventListener("mouseenter",b),this.el.addEventListener("mouseleave",c))},a.prototype.select=function(){this.moveClip(100)},a.prototype.unSelect=function(){this.moveClip(0)},a.prototype.reset=function(){this.moveClip(this.value)},a.prototype.setValue=function(a){this.value=a,this.moveClip(a)},a.prototype.destroy=function(){this.el.removeEventListener("click",this.starClick),this.el.removeEventListener("mouseenter",this.mouseEnter),this.el.removeEventListener("mouseleave",this.mouseLeave)},a.prototype.moveClip=function(a){"rect"!=this.clip.tagName?this.clip.style.width=a+"%":(this.clip.style["-webkit-transform"]="scaleX("+a+")",this.clip.style.transform="scaleX("+a+")")},a}();a.Star=b}(SW||(SW={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SW;!function(a){var b=function(b){function c(c,d,e){void 0===d&&(d=0),void 0===e&&(e=0),b.call(this),this.el=c,this.mark=d,this.voteCount=e,this.needRender=!1,this.config=new a.Config,this.stars=[],this.classes={ratingBlock:"w-rating",ratingBlockStretch:"w-rating_fit",star:"w-rating__star",mark:"w-rating__mark",voteCount:"w-rating__vote-count"},this.init()}return __extends(c,b),c.prototype.setConfig=function(a){this.config.set(a),this.needRender=!0},c.prototype.update=function(){if(this.needRender)return this.render();if(this.clearAllStar(),this.mark>0){for(var a=0|this.mark,b=0;a>b;b++)this.stars[b].setValue(100);a<this.stars.length&&this.stars[a].setValue(100*(this.mark-a)),this.markPlace.innerText=parseFloat(this.mark.toFixed(2)).toString(),this.voteNumberPlace.style.display="block",this.voteNumberPlace.innerText=this.voteCount.toString()}},c.prototype.render=function(){this.el.classList.remove(this.classes.ratingBlockStretch),this.config.get().stretch&&this.el.classList.add(this.classes.ratingBlockStretch),this.clear(),this.el.innerHTML=JST["rating."+this.config.get().starType+".html.hbs"](this.config.get()),this.initDOM(),this.needRender=!1,this.update()},c.prototype.setMark=function(a){this.mark=a},c.prototype.getMark=function(){return this.mark},c.prototype.setVoteCount=function(a){this.voteCount=a},c.prototype.getVoteCount=function(){return this.voteCount},c.prototype.lock=function(){this.setConfig({isLocked:!0})},c.prototype.unlock=function(){this.setConfig({isLocked:!1})},c.prototype.getIsLocked=function(){return this.config.get().isLocked},c.prototype.getStars=function(){return this.stars},c.prototype.clear=function(){for(var a=0;a<this.stars.length;a++)this.stars[a].destroy();this.stars=[],this.el.innerHTML="",this.markPlace=null,this.voteNumberPlace=null},c.prototype.clearAllStar=function(){this.stars.forEach(function(a){a.setValue(0)})},c.prototype.initDOM=function(){this.stars=[];for(var b=this.el.querySelectorAll("."+this.classes.star),c=0;c<b.length;c++)this.stars.push(new a.Star(b[c]));this.markPlace=this.el.querySelectorAll("."+this.classes.mark)[0],this.voteNumberPlace=this.el.querySelectorAll("."+this.classes.voteCount)[0],this.initEvents()},c.prototype.initEvents=function(){var a=this,b=this,c=function(){b.trigger("vote",parseInt(this.dataset.value)+1)},d=0,e=function(b){clearTimeout(d);for(var c=parseInt(b.target.dataset.value),e=0;e<a.stars.length;e++)c>=e?a.stars[e].select():a.stars[e].unSelect()},f=function(){clearTimeout(d),d=setTimeout(function(){for(var b=0;b<a.stars.length;b++)a.stars[b].reset()},200)};this.stars.forEach(function(a){a.setEvents(c,e,f)})},c.prototype.init=function(){this.el.classList.add(this.classes.ratingBlock),Handlebars.registerHelper("times",function(a,b){for(var c="",d=0;a>d;++d)c+=b.fn(d);return c})},c}(a.EventWidget);a.Rating=b}(SW||(SW={}));